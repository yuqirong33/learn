<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>鼠标拖拽效果</title>
<style>
    .div{
        width: 100px;
        height: 100px;
        position: absolute;
        top: 0px;
        left: 0px;
        background: red;
    }
</style>  
</head>
<body id="body">
<div class="div"></div>

<script>
  const box = document.getElementsByClassName('div')[0];
  const body = document.getElementById('body');
  let disX = 0;
  let disY = 0;
  let actY = 0;
  let actX = 0;

  box.onmousedown = function(ev){
      disX = ev.pageX - box.offsetLeft;  
      disY = ev.pageY - box.offsetTop;
      
      let cloneBox = box.cloneNode(true);
      cloneBox.style.opacity = .5;
      body.appendChild(cloneBox);


      document.onmousemove = function(e){

          cloneBox.style.left = (e.pageX - disX) + 'px';
          cloneBox.style.top = (e.pageY - disY) + 'px';
          
          actX = e.pageX - disX;
          actY = e.pageY - disY;
      }

      document.onmouseup = function(){
           document.onmousemove = document.onmouseup = null;
           cloneBox.remove();

           box.style.left = actX + 'px';
           box.style.top = actY + 'px'; 

      }
      return false;  //阻止默认行为
  }
  
</script>
</body>
</html>

